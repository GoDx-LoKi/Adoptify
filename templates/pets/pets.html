{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container text-light">
  <!-- Modern Sentence-Style Search Form -->
  <form method="GET" action="" class="search-sentence my-4 p-4 rounded shadow-lg" style="background: rgba(255, 255, 255, 0.1);">
    <div class="search-container text-center">
      <span class="search-text">I‚Äôm looking to adopt a </span>
      <select name="pet_type" class="sentence-input form-select d-inline w-auto" required>
        <option value="">Select Type</option>
        <option value="Dog" {% if values.pet_type == 'Dog' %}selected{% endif %}>Dog</option>
        <option value="Cat" {% if values.pet_type == 'Cat' %}selected{% endif %}>Cat</option>
        <option value="Rabbit" {% if values.pet_type == 'Rabbit' %}selected{% endif %}>Rabbit</option>
        <option value="Bird" {% if values.pet_type == 'Bird' %}selected{% endif %}>Bird</option>
        <option value="Other" {% if values.pet_type == 'Other' %}selected{% endif %}>Other</option>
      </select>
      <span class="search-text">, preferably a</span>
      <select name="gender" class="sentence-input form-select d-inline w-auto" style="max-width: 250px;">
        <option value="">Select Gender</option>
        <option value="Male" {% if values.gender == 'Male' %}selected{% endif %}>Male</option>
        <option value="Female" {% if values.gender == 'Female' %}selected{% endif %}>Female</option>
      </select>
      <span class="search-text">, around</span>
      <input type="number" name="age" class="sentence-input form-control d-inline w-auto" placeholder="Age" value="{{ values.age|default_if_none:'' }}" style="max-width: 80px;" >
      <span class="search-text"> years old, of</span>
      <select name="size" class="sentence-input form-select d-inline w-auto">
        <option value="">Select Size</option>
        <option value="Small" {% if values.size == 'Small' %}selected{% endif %}>Small</option>
        <option value="Medium" {% if values.size == 'Medium' %}selected{% endif %}>Medium</option>
        <option value="Large" {% if values.size == 'Large' %}selected{% endif %}>Large</option>
      </select>
      <span class="search-text">size, and located in </span>
      <select name="state" class="sentence-input form-select d-inline w-auto">
        <option value="">Select State</option>
        {% for state_code, state_name in STATES %}
          <option value="{{ state_name }}" {% if values.state == state_name %}selected{% endif %}>{{ state_name }}</option>
        {% endfor %}
      </select>
      <span class="search-text">. üêæ‚ù§Ô∏è</span>
      <button type="submit" class="sentence-btn btn btn-primary mt-2">Search</button>
    </div>
  </form>

  <!-- Pet Listing -->
  <div class="row">
    {% for pet in pets %}
      <div class="col-md-4 mb-4">
        <div class="card bg-dark text-light shadow-lg border-0 rounded-lg">
          <img class="card-img-top rounded-top" src="{{ pet.photo_main.url }}" alt="{{ pet.name }}" style="height: 350px; object-fit: cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title text-center">{{ pet.name }}</h5>
            <p class="card-text"><strong>Type:</strong> {{ pet.pet_type }}</p>
            <p class="card-text"><strong>Gender:</strong> {{ pet.gender }}</p>
            <p class="card-text"><strong>Age:</strong> {{ pet.age }} years</p>
            <a href="{% url 'pet_detail' pet.id %}" class="btn btn-outline-primary w-100 mt-auto">View Details</a>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-md-12">
        <h4 class="text-center text-warning">No pets found matching your criteria.</h4>
      </div>
    {% endfor %}
  </div>

  <nav>
    <ul class="pagination justify-content-center">
      {% if pets.has_previous %}
        <li class="page-item"><a class="page-link" href="?page={{ pets.previous_page_number }}">Previous</a></li>
      {% endif %}
      <li class="page-item active"><span class="page-link">Page {{ pets.number }} of {{ pets.paginator.num_pages }}</span></li>
      {% if pets.has_next %}
        <li class="page-item"><a class="page-link" href="?page={{ pets.next_page_number }}">Next</a></li>
      {% endif %}
    </ul>
  </nav>

  <style>
    .search-sentence {
      color: #e2744c;
      font-size: 1.2rem;
    }
  /* Dark theme dropdowns */
.sentence-input, .sentence-input option {
    background-color: #333 !important;
    color: #fff !important;
    max-width: 150px;
    border: 1px solid #555 !important;
}

/* Highlight effect on hover */
.sentence-input option:hover {
    background-color: #444 !important;
}

/* Ensuring dropdown arrow is visible */
.sentence-input:focus {
    box-shadow: none !important;
    border-color: #777 !important;
}

    .sentence-btn {
      font-size: 1rem;
      padding: 10px 20px;
      border-radius: 10px;
    }
    .card {
      transition: transform 0.3s ease-in-out;
    }
    .card:hover {
      transform: scale(1.05);
    }
  </style>
</div>
{% endblock %}
